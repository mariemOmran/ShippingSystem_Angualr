<form class="row g-3 mt-5 pt-0 p-5 text-end custom-form " [formGroup]="orderForm" (ngSubmit)="AddNewOrder()">
  <h2 class="mb-5">إضافة طلب </h2>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">النوع</label>
    <select class="form-select" formControlName="deliveryPlace" aria-label="Default select example">
      <option selected>اختار اوبشن</option>
      <option value="1">التسليم في الفرع</option>
      <option value="2">Two</option>
      <option value="3">Three</option>
    </select>
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">اسم العميل </label>
    <input type="text" class="form-control" formControlName="clientName" id="exampleFormControlInput1" placeholder="الاسم">
    <div class="danger" [hidden]="ClientName?.valid || ClientName?.untouched">
      <small *ngIf="ClientName?.errors?.['required']">الرجاء ادخال اسم العميل </small>
    </div>
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">رقم الهاتف</label>
    <input type="text" class="form-control" formControlName="phoneOne" id="exampleFormControlInput1">
    <div class="danger" [hidden]="PhoneOne?.valid || PhoneOne?.untouched">
      <small *ngIf="PhoneOne?.errors?.['required']">الرجاء ادخال رقم التليفون </small>
    </div>
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">رقم الهاتف 2</label>
    <input type="text" class="form-control" formControlName="phoneTwo" id="exampleFormControlInput1">
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">البريد الالكتروني</label>
    <input type="email" class="form-control" formControlName="email" id="exampleFormControlInput1">
    <div class="danger" [hidden]="Email?.valid || Email?.untouched">
      <small *ngIf="Email?.errors?.['required']">الرجاء ادخال البريد الالكتروني </small>
    </div>
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">المحافظة</label>
    <select class="form-select" formControlName="governmentID" aria-label="Default select example">
      <option value="default" selected >Open this select menu</option>
      <option *ngFor="let gov of governments" [value]="gov.id">{{ gov.name }}</option>
    </select>
    <div class="danger" [hidden]="GovernmentID?.valid || GovernmentID?.untouched">
      <small *ngIf="ClientName?.errors?.['required']">الرجاء اختيار المحافظة </small>
    </div>
  </div>
  <div class="mb-3 mt-2 col-auto">
    <label for="exampleFormControlInput1" class="form-label">المدينة</label>
    <select class="form-select" formControlName="cityID" aria-label="Default select example">
      <option value="default" selected>اختر المدينة</option>
      <option *ngFor="let city of cities" [value]="city.id">{{ city.name }}</option>
    </select>
    <div class="danger" [hidden]="CityID?.valid || CityID?.untouched">
      <small *ngIf="ClientName?.errors?.['required']">الرجاء اختيار المدينة </small>
    </div>
  </div>
  <div class="row">
    <div class="mb-3 mt-2 col-auto">
      <label for="exampleFormControlInput1" class="form-label">القرية والشارع</label>
      <input type="text" class="form-control" formControlName="streetAndVillage" id="exampleFormControlInput1" placeholder="القرية والشارع">
    </div>
    <div class="mb-3 mt-2 col-auto">
      <label for="switch1">التوصيل لقرية ؟</label>
      <p-inputSwitch inputId="switch1" formControlName="ifVillage" class="d-block mt-3"></p-inputSwitch>
    </div>
    <div class="mb-3 mt-2 col-auto">
      <label for="exampleFormControlInput1" class="form-label">نوع الشحن </label>
      <select class="form-select" formControlName="shippingTypeID" aria-label="Default select example">
        <option value="default" selected>اختر نوع الشحن </option>
        <option *ngFor="let type of shippingTypes" [value]="type.id">{{ type.name }}</option>
      </select>
      <div class="danger" [hidden]="ShippingTypeID?.valid || ShippingTypeID?.untouched">
        <small *ngIf="ClientName?.errors?.['required']">الرجاء اختيار نوع الشحن</small>
      </div>
    </div>
    <div class="mb-3 col-auto">
      <label for="exampleFormControlInput1" class="form-label">نوع الدفع</label>
      <select class="form-select" formControlName="paymentTypeID" aria-label="Default select example">
        <option value="default" selected>اختر نوع الدفع</option>
        <option *ngFor="let type of paymentTypes" [value]="type.id">{{ type.name }}</option>
      </select>
      <div class="danger" [hidden]="PaymentTypeID?.valid || PaymentTypeID?.untouched">
        <small *ngIf="ClientName?.errors?.['required']">الرجاء اختيار نوع الدفع</small>
      </div>
    </div>
  </div>
  <div class="mb-3 col-2">
    <label for="exampleFormControlInput1" class="form-label">الفرع</label>
    <select class="form-select" formControlName="branchID" aria-label="Default select example">
      <option value="default" selected>القاهرة</option>
      <option *ngFor="let branch of branches" [value]="branch.id">{{ branch.name }}</option>
    </select>
    <div class="danger" [hidden]="BrachID?.valid || BrachID?.untouched">
      <small *ngIf="ClientName?.errors?.['required']">الرجاء اختيار الفرع</small>
    </div>
  </div>
  <div class="container mt-3 text-end">
    <div class="row">
      <div class="col-md-2 d-flex align-items-start justify-content-end">
        <button type="button" class="btn btn-secondary" (click)="addRow()">إضافة منتج</button>
      </div>
      <div class="col-md-10">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">حذف</th>
              <th scope="col">الوزن(كجم)</th>
              <th scope="col">الكمية</th>
              <th scope="col">اسم المنتج</th>
            </tr>
          </thead>
          <tbody formArrayName="products">
            <tr *ngFor="let product of Products.controls; let i=index" [formGroupName]="i">
              <th scope="row">
                <button type="button" class="btn btn-danger" (click)="deleteRow(i)">حذف</button>
              </th>
              <td><input type="text" pInputText formControlName="weight" class="custom-border" /></td>
              <td><input type="text" pInputText formControlName="quantity" class="custom-border" /></td>
              <td><input type="text" pInputText formControlName="name" class="custom-border" /></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <div class="mb-3 col-auto">
      <label for="exampleFormControlInput1" class="form-label">تكلفة الطلب</label>
      <input type="number" class="form-control" formControlName="totalPrice" id="exampleFormControlInput1" placeholder="تكلفة الطلب">
      <div class="danger" [hidden]="TotalPrice?.valid || TotalPrice?.untouched">
        <small *ngIf="TotalPrice?.errors?.['required']">Total Price is Required</small>
      </div>
    </div>
    <div class="mb-3 col-auto">
      <label for="exampleFormControlInput1" class="form-label">إجمالي الوزن(كجم)</label>
      <input type="number" class="form-control" formControlName="totalWeight" id="exampleFormControlInput1" placeholder="إجمالي الوزن(كجم)">
      <div class="danger" [hidden]="TotalWeight?.valid || TotalWeight?.untouched">
        <small *ngIf="TotalWeight?.errors?.['required']">Total Weight is Required</small>
      </div>
    </div>
    <div class="mb-3 col-auto">
      <label for="exampleFormControlInput1" class="form-label">ملاحظات</label>
      <div class="form-floating">
        <textarea class="form-control" formControlName="notes" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
      </div>
    </div>
    <div class="row border border-secondary-subtle rounded">
      <p>بيانات التاجر</p>
      <div class="mb-3 col-auto">
        <label for="exampleFormControlInput1" class="form-label">رقم الهاتف </label>
        <input type="text" class="form-control" formControlName="merchantPhone" id="exampleFormControlInput1" placeholder="01025726246">
      </div>
      <div class="mb-3 col-auto">
        <label for="exampleFormControlInput1" class="form-label">العنوان</label>
        <input type="text" class="form-control" formControlName="merchantAddress" id="exampleFormControlInput1" placeholder="حدائق الاهرام">
      </div>
    </div>
  </div>
  
  <div class="col-md-1 d-flex align-items-start mt-5">
    <button [disabled]="orderForm.invalid" type="submit" class="btn btn-primary">حفظ</button>
  </div>
</form>
